<?php

require_once __DIR__ . '/MessageSource.php';

class PerformanceTest extends PHPUnit_Framework_TestCase {
    protected function setUp() {
    }

    protected function tearDown() {
    }

    /**
     * Inject 1000 queue entries of XXX type, and consume
     */
    public function test1000() {
        //FIXME override batch_max
        $generator = new MessageSource();
        foreach ( range( 0, 1000 ) as $i ) {
            $generator->inject();
        }

        // FIXME:
        // set_variable( 'queue', 'test-donations' );
        // module_invoke( 'queue2civicrm', 'batch_process' );
        system( "drush qc" );
    }
}
